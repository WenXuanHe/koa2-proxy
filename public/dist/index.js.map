{"version":3,"sources":["webpack:///./public/src/javascripts/Thumb.js","webpack:///./public/src/stylesheets/style.scss","webpack:///./public/src/javascripts/components/x-praise.js","webpack:///./public/src/javascripts/addOne.js","webpack:///./public/src/javascripts/thrities.js","webpack:///./public/src/javascripts/components/x-star.js"],"names":["xtag","register","content","lifecycle","created","thrities","methods","praiseClick","elem","then","res","catch","err","alert","message","accessors","attribute","id","get","set","value","number","$","find","text","name","events","click","e","target","className","addOne","proxy_url","axios","post","param","url","type","data","code","cb","canRun","apply","arguments"],"mappings":";;;;;;AAEA;;AACA;;AACA,wB;;;;;;ACJA,0C;;;;;;;;;;;;ACAA;;AACA;;;;;;AAEAA,MAAKC,QAAL,CAAc,UAAd,EAA0B;;AAExBC,0KAFwB;;AAQxBC,gBAAU;AACRC,kBAAS,mBAAU;AACf,kBAAKC,QAAL,GAAgB,wBAAS,oBAAO,QAAP,CAAT,CAAhB;AACH;AAHO,MARc;AAaxBC,cAAQ;AAENC,oBAFM,uBAEMC,IAFN,EAEY;AAAA;;AAEd,kBAAKH,QAAL,CAAc,KAAK,SAAL,CAAd,EAA+BI,IAA/B,CAAoC,UAACC,GAAD,EAAO;AACvC,uBAAK,aAAL,IAAsB,EAAE,MAAK,aAAL,CAAxB;AACA;AACA;AACH,cAJD,EAIGC,KAJH,CAIS,UAAUC,GAAV,EAAe;AACpBC,uBAAMD,IAAIE,OAAV;AACH,cAND;AAOH;AAXK,MAbgB;;AA2BxBC,gBAAU;AACR,oBAAU;AACNC,wBAAU;AACNC,qBAAG;AADG,cADJ;AAINC,kBAAK,eAAU;AACX,wBAAO,KAAKD,EAAZ;AACH,cANK;AAONE,kBAAK,aAASC,KAAT,EAAe;AAChB,sBAAKH,EAAL,GAAUG,KAAV;AACH;AATK,UADF;;AAaR,wBAAc;AACVJ,wBAAU;AACNK,yBAAO;AADD,cADA;AAIVH,kBAAK,eAAU;AACX,wBAAO,KAAKG,MAAZ;AACH,cANS;AAOVF,kBAAK,aAASC,KAAT,EAAe;;AAEhB,sBAAKC,MAAL,GAAcD,KAAd;AACAE,mBAAE,IAAF,EAAQC,IAAR,CAAa,eAAb,EAA8BC,IAA9B,CAAmCJ,KAAnC;AACH;AAXS,UAbN;;AA2BR,sBAAY;AACRJ,wBAAU;AACNS,uBAAK;AADC,cADF;AAIRP,kBAAK,eAAU;AACX,wBAAO,KAAKO,IAAZ;AACH,cANO;AAORN,kBAAK,aAASC,KAAT,EAAe;;AAEhB,sBAAKK,IAAL,GAAYL,KAAZ;AACAE,mBAAE,IAAF,EAAQC,IAAR,CAAa,aAAb,EAA4BC,IAA5B,CAAiCJ,KAAjC;AACH;AAXO;;AA3BJ,MA3Bc;;AAsExBM,aAAO;AACLC,gBAAM,eAASC,CAAT,EAAW;AACb,iBAAGA,EAAEC,MAAF,CAASC,SAAT,KAAuB,OAA1B,EAAkC;AAC9B,sBAAKvB,WAAL,CAAiBqB,EAAEC,MAAnB;AACH;AACJ;AALI;AAtEiB,EAA1B,E;;;;;;;;;;;ACHO,KAAME,0BAAS,SAATA,MAAS,CAAUC,SAAV,EAAqB;AACvC,SAAI,OAAOC,MAAMC,IAAb,KAAsB,WAA1B,EAAuC;AACnCrB,eAAM,mBAAN;AACA;AACH;AACD,SAAIsB,QAAQ;AACRC,cAAK,sCADG;AAERC,eAAM,MAFE;AAGRC,eAAM;AAHE,MAAZ;AAKA,YAAO,UAAUrB,EAAV,EAAc;AACjBkB,eAAMG,IAAN,CAAWrB,EAAX,GAAgBA,EAAhB;AACA,gBAAOgB,MAAMC,IAAN,CAAWF,SAAX,EAAsBG,KAAtB,EAA6B1B,IAA7B,CAAkC,UAAUC,GAAV,EAAe;AACpDA,mBAAMA,IAAI4B,IAAV;AACA,iBAAI,CAAC5B,IAAI6B,IAAT,EAAe;AACX1B,uBAAMH,IAAII,OAAV;AACA;AACH;AACD,oBAAOJ,GAAP;AACH,UAPM,CAAP;AAQH,MAVD;AAWH,EArBM,C;;;;;;;;;;;;ACAP;;;;;mBAKe,UAAC8B,EAAD,EAAQ;;AAEnB,SAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B,MAAM,uBAAN;AAC9B,SAAIC,SAAS,IAAb;AACA,YAAO,YAAY;AACf,aAAI,CAACA,MAAL,EAAa;AACbA,kBAAS,KAAT;AACA,gBAAOD,GAAGE,KAAH,CAAS,IAAT,EAAeC,SAAf,EAA0BlC,IAA1B,CAA+B,UAAUC,GAAV,EAAe;AACjD+B,sBAAS,IAAT;AACA,oBAAO/B,GAAP;AACH,UAHM,CAAP;AAIH,MAPD;AAQH,E;;;;;;;;ACjBD;;AACA;;;;;;AAEAV,MAAKC,QAAL,CAAc,QAAd,EAAwB;;AAEtBC,sEAFsB;;AAItBC,gBAAU;AACRC,kBAAS,mBAAU;AACf,kBAAKC,QAAL,GAAgB,wBAAS,oBAAO,QAAP,CAAT,CAAhB;AACH;AAHO,MAJY;AAStBC,cAAQ;AAENC,oBAFM,uBAEMC,IAFN,EAEY;AAAA;;AAEd,kBAAKH,QAAL,CAAc,KAAK,SAAL,CAAd,EAA+BI,IAA/B,CAAoC,UAACC,GAAD,EAAO;AACvC,uBAAK,aAAL,IAAsB,EAAE,MAAK,aAAL,CAAxB;AACA;AACA;AACH,cAJD,EAIGC,KAJH,CAIS,UAAUC,GAAV,EAAe;AACpBC,uBAAMD,IAAIE,OAAV;AACH,cAND;AAOH;AAXK,MATc;AAsBtBY,aAAO;AACLC,gBAAM,eAASC,CAAT,EAAW;AACb,iBAAGA,EAAEC,MAAF,CAASC,SAAT,KAAuB,MAA1B,EAAiC;AAC7B,sBAAKvB,WAAL,CAAiBqB,EAAEC,MAAnB;AACH;AACJ;AALI;AAtBe,EAAxB,E","file":"index.js","sourcesContent":["// import PraiseButton from './PraiseButton.js';\r\n// import './common/jquery.min.js';\r\nimport '$css/style.scss';\r\nimport './components/x-praise';\r\nimport './components/x-star';\r\n// export class Thumb extends PraiseButton{\r\n// \tconstructor(){\r\n// \t\tsuper(...arguments);\r\n// \t}\r\n\r\n// \tpraise(elem){\r\n// \t\tthis.praiseClick(elem);\r\n// \t}\r\n// }\r\n\r\n// **\r\n// 如何书写面向对象？\r\n// 我把元素封装在了子类的内部，\r\n// 这样不利于维护，要区分哪些是需要传O递的，\r\n// 哪些是需要封装的，这个很重要\r\n\r\n// $.extend({\r\n// \tthumb : function(num, elem){\r\n// \t\treturn new Thumb(num, elem);\r\n// \t}\r\n// });\r\n\r\n// const thumb = new Thumb(0, '.thumb');\r\n// thumb.praise('.count');\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/src/javascripts/Thumb.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./public/src/stylesheets/style.scss\n// module id = 1\n// module chunks = 0","import { addOne } from '../addOne';\r\nimport thrities from '../thrities';\r\n\r\nxtag.register('x-praise', {\r\n\r\n  content: `<div>\r\n        <span data-name></span>\r\n        <span class=\"count\" data-number></span>\r\n        <button class='thumb'>点赞</button>\r\n    </div>`,\r\n\r\n  lifecycle:{\r\n    created: function(){\r\n        this.thrities = thrities(addOne('/proxy'));\r\n    }\r\n  },\r\n  methods:{\r\n\r\n    praiseClick(elem) {\r\n\r\n        this.thrities(this['data-id']).then((res)=>{\r\n            this['data-number'] = ++this['data-number'];\r\n            ////渲染页面\r\n            // this.render(elem);\r\n        }).catch(function (err) {\r\n            alert(err.message);\r\n        });\r\n    }\r\n  },\r\n\r\n  accessors:{\r\n    'data-id':{\r\n        attribute:{\r\n            id:0\r\n        },\r\n        get: function(){\r\n            return this.id;\r\n        },\r\n        set: function(value){\r\n            this.id = value;\r\n        }\r\n    },\r\n\r\n    'data-number':{\r\n        attribute:{\r\n            number:0\r\n        },\r\n        get: function(){\r\n            return this.number;\r\n        },\r\n        set: function(value){\r\n\r\n            this.number = value;\r\n            $(this).find('[data-number]').text(value);\r\n        }\r\n    },\r\n\r\n    'data-name':{\r\n        attribute:{\r\n            name:''\r\n        },\r\n        get: function(){\r\n            return this.name;\r\n        },\r\n        set: function(value){\r\n\r\n            this.name = value;\r\n            $(this).find('[data-name]').text(value);\r\n        }\r\n    },\r\n\r\n  },\r\n\r\n  events:{\r\n    click:function(e){\r\n        if(e.target.className === 'thumb'){\r\n            this.praiseClick(e.target);\r\n        }\r\n    }\r\n  }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/src/javascripts/components/x-praise.js","export const addOne = function (proxy_url) {\r\n    if (typeof axios.post === 'undefined') {\r\n        alert('axios is not exit');\r\n        return;\r\n    }\r\n    var param = {\r\n        url: 'http://localhost/thumb_php/thumb.php',\r\n        type: 'POST',\r\n        data: {}\r\n    };\r\n    return function (id) {\r\n        param.data.id = id;\r\n        return axios.post(proxy_url, param).then(function (res) {\r\n            res = res.data;\r\n            if (!res.code) {\r\n                alert(res.message);\r\n                return;\r\n            }\r\n            return res;\r\n        })\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/src/javascripts/addOne.js","/**\r\n * 节流函数，在一定的时间范围内阻止请求\r\n * @param {*cb} 是一个返回promise的函数\r\n */\r\n\r\nexport default (cb) => {\r\n\r\n    if (typeof cb !== 'function') throw 'cb must is a function';\r\n    let canRun = true;\r\n    return function () {\r\n        if (!canRun) return;\r\n        canRun = false;\r\n        return cb.apply(this, arguments).then(function (res) {\r\n            canRun = true;\r\n            return res;\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./public/src/javascripts/thrities.js","import { addOne } from '../addOne';\nimport thrities from '../thrities';\n\nxtag.register('x-star', {\n\n  content: `<div class=\"star\">五角星点赞</div>`,\n\n  lifecycle:{\n    created: function(){\n        this.thrities = thrities(addOne('/proxy'));\n    }\n  },\n  methods:{\n\n    praiseClick(elem) {\n\n        this.thrities(this['data-id']).then((res)=>{\n            this['data-number'] = ++this['data-number'];\n            ////渲染页面\n            // this.render(elem);\n        }).catch(function (err) {\n            alert(err.message);\n        });\n    }\n  },\n  events:{\n    click:function(e){\n        if(e.target.className === 'star'){\n            this.praiseClick(e.target);\n        }\n    }\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./public/src/javascripts/components/x-star.js"],"sourceRoot":""}